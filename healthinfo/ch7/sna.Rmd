---
title: 第七章 社会网络分析
author:
 - 授课教师：吴翔 \newline
 - 邮箱：wuhsiang@hust.edu.cn
date: "2018年11月1日"
linestretch: 1.25
fontsize: 12
bibliography: ref.bib
header-includes:
  - \usepackage{ctex}
output:
  beamer_presentation:
    theme: "CambridgeUS"
    colortheme: "beaver"
    latex_engine: xelatex
    toc: true
---

```{r setup, include = FALSE}

knitr::opts_chunk$set(echo = FALSE, warning = FALSE)

```


# 社会网络分析概述（2个课时）

## 课程存储地址

- 课程存储地址： [https://github.com/wuhsiang/Courses](https://github.com/wuhsiang/Courses)
- 资源：课件、案例数据及代码

![课程存储地址](../../QR.png){width=40%}

## 参考教材

- 斯坦利·沃瑟曼, 凯瑟琳·福斯特. 社会网络分析:方法与应用. 北京：中国人民大学出版社. 2012. (注：对应英文版于1996年出版)
- 托马斯. 社会网络与健康:模型、方法与应用. 北京:人民卫生出版社. 2016.
- 埃里克·克拉泽克, 加博尔·乔尔迪. 网络数据的统计分析：R语言实践. 西安:西安交通大学出版社. 2016.

## 本节知识点

- 社会网络的基本概念
- 社会网络的符号表示
- 基本社会网络结构
- 社会网络分析软件

## 社交网络时代

IT --> 联系便利 --> 社交网络时代

![社交网络时代](figures/sns.jpg){width=55%}

## 社会网络与健康

![社会网络与肥胖](figures/dinner.jpg){width=50%}

- 哪种饮食结构/生活习惯会让人变胖？
- 肥胖会“**传染**”吗？

## 社会网络与健康（续）

![社会网络与抑郁](figures/depression.jpg){width=50%}

- 哪种特质的人更容易抑郁？
- **社会支持** 是否有助于改善抑郁？

## 社会网络与健康（续）

![社会网络与卫生服务能力提升](figures/mic.jpg){width=50%}

- 医联体模式是否有助于提升基层医疗机构的卫生服务能力？


## 社会网络视角

- 行动者之间的关系是主要的，行动者的属性是次要的
- 行动者和他们的行动被视为相互依赖的，而不是相互独立的自治体
- 行动者之间的联系是信息和资源的流动通道
- 个体的网络模型将网络结构环境视为个体行动的机遇或限制
- 网络模型将（社会、经济、政治、情感等）结构概念化为行动者之间关系的稳定形式

## 7.1.1 基本概念

社会网络分析（social network analysis, SNA）的关键概念：

- 行动者：社会网络分析中的社会实体被称为行动者，包括个体、企业、民族国家等。
- 关系连接：行动者通过社会关系彼此相连。这些联系包括：评价、资源传输、行为互动等。联系存在于特定的成对行动者之间。
- 关系：群体成员间某种类型的联系的集合。
- 社会网络：行动者（人、组织等），及其之间关系的集合

其它关键概念还包括：二元图、三元图、子群、群。

## 基本特征

SNA的基本特征[@freeman2004]：

- 考虑整个网络结构
- 论证网络结构如何影响个体行为
- 运用图表展示
- 运用数学的形式

## 7.1.2 社会网络数据

社会网络数据包括：

- 行动者集合
- 社会关系
- 行动者属性

社会网络数据的**符号表示**包括：

- 图论
- 社会计量

## 图论符号表示法

图$G = (N, L)$由节点的集合$N$和边的集合$L$所定义。

| 社会网络         | 图              |
|:----------------:|:---------------:|
| 行动者           | 节点            |
| 社会关系         | 边              |

Table: 社会网络与图论的对应关系

图论符号表示法中，可以采用节点集合和边列表来表示社会网络数据。

## 图论符号表示法（续）

- 行动者集合$G$ = {王重阳，林朝英，黄药师，欧阳锋，洪七公，段智兴，周伯通，郭靖，杨过}
- 社会关系集合$L$ = {<王重阳，周伯通>，<王重阳，林朝英>，<黄药师，郭靖>，<洪七公，郭靖>，<周伯通，郭靖>，<欧阳锋，杨过>}

```{r, fig.align='center', fig.height=4.5}

# use igraph package
suppressMessages(library(igraph))
rm(list = ls())
# set random seeds
set.seed(123)
# create graph g from literal
g <- graph_from_literal(WCY-ZBT, WCY-LCY, HYS-GJ, HQG-GJ, ZBT-GJ, OYF-YG, DZX)
# plot the graph
plot(g, layout = layout.circle)

```

## 社会计量符号表示

- **社会计量**（sociometric）：由人以及被度量的人与人之间的情感关系组成的社会网络数据集合，旨在研究一群人中积极和消极的感情关系。
- 社会关系矩阵：邻接矩阵，对应于量化行动者之间的社会关系图。

## 邻接矩阵

```{r, results='asis'}

suppressMessages(library(pander))
suppressMessages(library(magrittr))
g %>% as_adjacency_matrix(sparse = F) %>% pandoc.table(split.tables = Inf)

```

## 其它情形

- 有值关系
- 有向关系
- 多重关系
- 网络动态性

## 有向图/有值图

- 有向图
- 有值图（含权图）

```{r, fig.align='center', fig.height=4.8}

par(mfrow = c(1, 2))
#
graph_from_literal(WCY++ZBT, WCY+-LCY, HYS+-GJ, HQG++GJ, ZBT++GJ, OYF++YG, DZX) %>% plot(layout = layout.circle)
# weighted edges
gw <- g %>% set_edge_attr("weight", value = 1:6) %>%
  set_edge_attr("color", value = "red")
plot(gw, edge.width = E(gw)$weight)


```

## 多重关系

- 师门关系
- 家庭关系

```{r, fig.align='center', fig.height=4.8}

par(mfrow = c(1, 2))
# create graph h1 from literal
graph_from_literal(WCY-ZBT, LCY, HYS, HQG-GJ, OYF, YG, DZX) %>% plot(layout = layout.circle)
# create graph h2 from literal
graph_from_literal(WCY-LCY, HYS-GJ, HQG, ZBT-GJ, OYF-YG, DZX) %>% plot(layout = layout.circle)

```

## 网络动态性

- 前30年
- 后30年

```{r, fig.align='center', fig.height=4.8}

par(mfrow = c(1, 2))
# early period
g %>% subgraph(c(1, 3:4, 6:7, 9)) %>% plot(layout = layout.circle)
# late period
g %>% subgraph(c(2,4:9)) %>% plot(layout = layout.circle)

```

## 7.1.3 主要网络模型

参照网络模型：

- 随机网络
- 规则网络

现实网络模型：

- 小世界网络
- 无标度网络（优先连接网络）


## 随机网络

- 基本假定：节点之间的边是随机构建的。
- $G(n, p)$模型：图$G$有$n$个节点，$n\choose 2$条边以$p$的概率随机连接。

```{r, fig.align='center', fig.height=4.5}

# create and plot a random network
erdos.renyi.game(12, 0.1) %>% plot(layout = layout.circle)

```


## 规则网络

- 基本假设：每个节点的度是常数$c$

```{r, fig.align='center', fig.height=4.5}

make_lattice(length = 2, dim = 3) %>% plot(circular = T)

```


## 小世界网络

- 基本问题：社会网络中两个节点之间传递信息将需要几个步骤？
- 基本假设：大多数节点几乎没有联系，但任意两个节点之间的距离都比预期的短
- 特点：这个世界真小啊！“六度分割”理论

```{r, fig.align='center', fig.height=4.5}

sample_smallworld(1, 20, 3, 0.02) %>% plot(circular = T)

```

## 无标度网络

- 基本问题：加入现有网络时，行动者对要联系的人有偏好吗？
- 基本假设：行动者更喜欢连接到网络最中心的位置
- 特点：“富者愈富”


```{r, fig.align='center', fig.height=4.5}

sample_pa(n = 20, power = 1, directed = F) %>% plot(circular = T)

```


## 7.1.4 社会网络分析软件

常用分析工具：

- UCINET
- Pajek
- NetMiner
- STRUCTURE
- MultiNet
- StOCNET


## 新兴分析工具

- Python-NetworkX
- R-**igraph**

本课程采用`igraph`包进行演示。

#  社会网络主要分析角度（4个课时）

## 本节知识点

- 图论
- 中心性与声望
- 结构平衡和传递性
- 凝聚子群
- 结构等价

<!-- ## 子图 -->

<!-- - 子图：若$G_{s} = (N_{s}, L_{s})$，且$N_{S} \subset N$、$L_{s} \subset L$，那么$G_{s}$是$G$的子图 -->
<!--   - 点导出子图 -->
<!--   - 边导出子图 -->
<!-- - 二元图：包含两个节点的点导出子图 -->
<!-- - 三元图：包含三个节点的点导出子图 -->

<!-- ## 中心性度量 -->

<!-- - 度 -->
<!-- - 接近性 -->
<!-- - 中间性 -->

<!-- ## 度 -->

<!-- \begin{equation*} -->
<!--   \underbrace{d(n_{i})}_{\text{degree}} = \underbrace{\sum_{j} x_{ji}}_{\text{indegree}} = \underbrace{\sum_{j} x_{ij}}_{\text{outdegree}}. -->
<!-- \end{equation*} -->

<!-- \begin{equation*} -->
<!--   C_{D}(n_{i}) = \frac{d(n_{i})}{g - 1} -->
<!-- \end{equation*} -->

<!-- ```{r} -->



<!-- ``` -->


<!-- ## 网络属性 -->

<!-- - 度分布 -->
<!-- - 聚类系数 -->
<!-- - 平均路径长度 -->

# 案例（2个课时）

## 本节知识点

- SNA与文献分析
- SNA与健康行为分析

<!-- ## 医学领域案例：文献分析 -->

<!-- - 李杰. CiteSpace中文版指南. http://cluster.ischool.drexel.edu/~cchen/citespace/manual/CiteSpaceChinese.pdf[EB/OL][2018-09-05].2015. -->


<!-- ## 医学领域案例：行为分析 -->


## 参考文献
